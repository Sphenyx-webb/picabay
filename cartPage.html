<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Cart</title>
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css" type="text/css">
    <!-- Font-awesome CSS -->
    <link rel="stylesheet" href="vendor/fontawesome/css/all.min.css" type="text/css">
    <!-- Normalize CSS -->
    <link rel="stylesheet" href="static/css/normalize.css" type="text/css">
    <!-- Main CSS-->
    <link rel="stylesheet" href="static/css/style.css" type="text/css">
    <!-- favicon links -->
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
    <link rel="icon" sizes="32x32" href="./favicon-32x32.png" type="image/png" >
    <link rel="icon" sizes="16x16" href="./favicon-16x16.png" type="image/png" >
    <link rel="manifest" href="./site.webmanifest">
    <style>
    input:disabled{
        width: 50px;
        background-color: transparent;
        color: black;
        outline: none;
        border: none;
     }
    
    .cartContainer{
        height: max-content;
      }

      .back p{
        font-size: 18px;
        font-weight: bold;
      }

      .back-btn{
        width: 30px;
        height: 30px;
        line-height: 30px;
        display: inline-block;
        text-align: center;
        margin-right: 6px;
      }

      .cart-items-container{
        border-top: 2px solid #DBDEE0;
      }

      .cart-table-headers{
        display: grid;
        grid-template-columns: 10% 24% 16% 16% 16% 18%;
        align-items: center;
      }

      .cart-item{
        box-shadow: 0px 0px 5px 0 rgba(78, 75, 75, 0.2);
        display: grid;
        grid-template-columns: 10% 24% 16% 16% 16% 18%;
      }

      .cart-item-img{
         width: 60px;
         height: 100%;
         display: flex;
         align-items: center;
         justify-content: center;
         padding: 2px;
      }

      .qty-input{
        width: 50px;
        height: 50px;
        text-align: center;
        border: 2px solid #DBDEE0;
        font-weight: bold;
      }

      .add-qty, .sub-qty{
        width: 30px;
        height: 30px;
        font-size: 20px;
        font-weight: bold;
        line-height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .price-cont{
        font-size: 18px;
      }

      .spec{
        font-size: 14px;
      }

      .fa-trash{
        color: #999A9C;
        font-size: 24px;
      }

      .fa-trash:hover{
        color: hwb(0 0% 0%);
        cursor: pointer;
      }

      .subtotal{
        width: 78%;
        box-shadow: 0px 0px 4px 0 #098D16;
      }

      .subtotal p, .checkout-btn p{
        font-size: 18px;
      }
    
    </style>
</head>
<body>
     <!-- MAIN HEADER -->
     <header id="mainHeader" class="header"></header>

  <!-- LOGIN -->
    <section id="cartPage" class="cartPage">
        <div class="container-fluid p-5 cartContainer">
           <div class="container-fluid bg-white rounded-4 py-5 px-5">
            <div class="d-flex align-items-center back">
                <span class="rounded-circle bg-main text-center text-brand-gray back-btn"><span class="fa fa-chevron-left"></span></span>
                 <p>Continue Shopping</p>
            </div>
            <div class="cart-items-container mt-4 pt-4">
                <div>
                    <h3>My Cart</h3>
                    <p class="text-brand-gray-300">You have <span class="numOfCartItems"></span> items in your cart</p>
                </div>
                <div class="mt-5">
                    <div class="cart-table-headers bg-brand-gray px-2 py-3 rounded-4">
                        <span>
                            <h5>Item</h5>
                        </span>
                        <span>
                            <h5>Name</h5>
                        </span>
                        <span class="d-flex justify-content-center">
                            <h5>Price</h5>
                        </span>
                        <span class="d-flex justify-content-center">
                            <h5>Quantity</h5>
                        </span>
                        <span class="d-flex justify-content-center">
                            <h5>Total</h5>
                        </span>
                        <span class="d-flex justify-content-end align-items-center pe-3">
                            <p class="pe-2 text-brand-gray-300">Sorted by:</p>
                            <h5>Price</h5>
                        </span>
                    </div>
                    <div class="cart-items">
                        <div class="cart-item p-2 my-4 rounded-4">
                            <div>
                                <div class="cart-item-img bg-main-200 rounded-3">
                                    <img src="./media/images/products/asus.png" alt="" class="img-fluid">
                                </div>
                            </div>
                            <div class="pe-5">
                                <h6>Hp Envy 13</h6>
                                <p class="spec text-brand-gray-300">16gb RAM, 512gb SSD, Intel Core i7</p>
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <p class="fw-bold price-cont"><span class="dollar-sign">$</span class="price" data-price="800">800</p>
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <div class="d-flex align-items-center">
                                    <button class="btn btn-main sub-qty">&minus;</button>
                                    <input type="text" value="1" data-available="10" class="qty-input mx-2 rounded-2">
                                    <button class="btn btn-main add-qty">&plus;</button>
                                </div>
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <p class="fw-bold price-cont"><span class="dollar-sign">$</span class="total">800</p>
                            </div>
                            <div class="d-flex justify-content-center align-items-center">
                                <i class="fa-solid fa-trash"></i>
                            </div>
                        </div>

                        <div class="cart-item p-2 my-4 rounded-4">
                            <div>
                                <div class="cart-item-img bg-main-200 rounded-3">
                                    <img src="./media/images/products/asus.png" alt="" class="img-fluid">
                                </div>
                            </div>
                            <div class="pe-5">
                                <h6>Hp Envy 13</h6>
                                <p class="spec text-brand-gray-300">16gb RAM, 512gb SSD, Intel Core i7</p>
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <p class="fw-bold price-cont"><span class="dollar-sign">$</span class="price" data-price="800">800</p>
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <div class="d-flex align-items-center">
                                    <button class="btn btn-main sub-qty">&minus;</button>
                                    <input type="text" value="1" data-available="10" class="qty-input mx-2 rounded-2">
                                    <button class="btn btn-main add-qty">&plus;</button>
                                </div>
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <p class="fw-bold price-cont"><span class="dollar-sign">$</span class="total">800</p>
                            </div>
                            <div class="d-flex justify-content-center align-items-center">
                                <i class="fa-solid fa-trash"></i>
                            </div>
                        </div>

                        <div class="cart-item p-2 my-4 rounded-4">
                            <div>
                                <div class="cart-item-img bg-main-200 rounded-3">
                                    <img src="./media/images/products/asus.png" alt="" class="img-fluid">
                                </div>
                            </div>
                            <div class="pe-5">
                                <h6>Hp Envy 13</h6>
                                <p class="spec text-brand-gray-300">16gb RAM, 512gb SSD, Intel Core i7</p>
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <p class="fw-bold price-cont"><span class="dollar-sign">$</span class="price" data-price="800">800</p>
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <div class="d-flex align-items-center">
                                    <button class="btn btn-main sub-qty">&minus;</button>
                                    <input type="text" value="1" data-available="10" class="qty-input mx-2 rounded-2">
                                    <button class="btn btn-main add-qty">&plus;</button>
                                </div>
                            </div>
                            <div class="d-flex align-items-center justify-content-center">
                                <p class="fw-bold price-cont"><span class="dollar-sign">$</span class="total">800</p>
                            </div>
                            <div class="d-flex justify-content-center align-items-center">
                                <i class="fa-solid fa-trash"></i>
                            </div>
                        </div>
                    </div>
                    <div class="cart-total-section d-flex justify-content-between align-items-center pt-5">
                        <div class="d-flex justify-content-between px-3 py-2 rounded-3 subtotal">
                            <p class="fw-bold">Subtotal</p>
                            <h6 class="fw-bold"><span class="dollar-sign">$</span id="subTotal">2,400</h6>
                        </div>
                        <div>
                            <button class="btn btn-main-300 w-100 rounded-3 px-3 py-2 checkout-btn"><p>Checkout</p></button>
                        </div>
                    </div>
                </div>
            </div>
           </div>
        </div>
        </section>

    <!-- MAIN FOOTER -->
       <footer class="footer text-light bg-brand-dark pt-5 pb-4 mt-0"></footer>
    
        <!-- <script>
        const totals = document.querySelectorAll(".total");
        
        totals.forEach(total => {
        const parentEl = total.parentElement;
        const price = parseInt(parentEl.querySelector(".price").getAttribute("data-price"));
        const qty   = parseInt(parentEl.querySelector(".qty-input").value);
        total.setAttribute("data-total", parseInt(price * qty));
        total.innerHTML = `${formatAsCurrency(price * qty)}`;
        getSubTotal();
        });
        
        const minusBtn = document.querySelectorAll(".sub-qty");
        const plusBtn  = document.querySelectorAll(".add-qty");
        
        minusBtn.forEach(btn => {
        btn.addEventListener("click", () => {
        let inputField = btn.nextElementSibling;
        let inputFieldVal = convert_to_pint(inputField.value);
        if(inputFieldVal > 1){
        inputFieldVal -= 1;
        } else {
        btn.disabled = true;
        }
        inputField.value = inputFieldVal;
        updateItems(btn, inputFieldVal);
        })
        });
        
        plusBtn.forEach(btn => {
        btn.addEventListener("click", () => {
        let inputField    = btn.previousElementSibling;
        let limit         = parseInt(inputField.getAttribute("data-available"));
        let inputFieldVal = convert_to_pint(inputField.value);
        if(inputFieldVal >= 1 && inputFieldVal < limit){
        inputFieldVal += 1;
        }
        if(inputFieldVal > limit){
        inputFieldVal = limit;
        }
        inputField.value = inputFieldVal;
        updateItems(btn, inputFieldVal);
        inputField.previousElementSibling.disabled = false;
        })
        });
        
        
        totals.forEach(total => {
        const parentEl    = total.parentElement;
        const inputField  = parentEl.querySelector(".qty-input");
        const limit       = parseInt(inputField.getAttribute("data-available"));
        const elem        = inputField.nextElementSibling;
        inputField.addEventListener("keydown", e => {
        if(e.keyCode == 13){
        let inputFieldVal = convert_to_pint(inputField.value);
        if(inputFieldVal < limit){
        inputField.value = inputFieldVal;
        } else {
        inputField.value = limit;
        }
        updateItems(elem, inputField.value);
        }
        });
        });
        
        
        function getSubTotal(){
        let totalPrice = 0
        totals.forEach(total => {
        totalPrice += parseInt(total.getAttribute("data-total"));
        })
        subTotal.innerHTML = `${formatAsCurrency(totalPrice)}`
        }
        
        function updateItems(elem, qty){
        qty = parseInt(qty);
        const parentEl = elem.parentElement.parentElement;
        const price = parseInt(parentEl.querySelector(".price").getAttribute("data-price"));
        const total = parentEl.querySelector(".total");
        total.setAttribute("data-total", parseInt(price * qty));
        total.innerHTML = `${formatAsCurrency(price * qty)}`;
        getSubTotal();
        }
        
        function convert_to_pint(a){
        a = parseInt(a);
        if ( isNaN(a) ){
        a = 1;
        } else if (a < 0) {
        a = a * -1;
        } else if(a == 0){
        a = 1;
        }
        return a;
        }
        
        function formatAsCurrency(amount){
        amount = parseFloat(amount);
        const new_price = Intl.NumberFormat("en-NG", {
        style: 'currency',
        currency: 'USD',
        }).format(amount);
        return `<span class="price-symbol">&#8358;</span>${new_price.substring(3, new_price.length)}`;
        }
        </script> -->
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js" type="text/javascript"></script>
    <script src="static/js/script.js"></script>
</body>
</html>